@model Control_De_Tareas.Data.Entitys.Tareas
@{
    ViewData["Title"] = "Detalle de Tarea";
    var submission = ViewBag.Submission as Control_De_Tareas.Data.Entitys.Submissions;
}

<h2>@Model.Title</h2>

<p><strong>Curso:</strong> @Model.CourseOffering?.Course?.Description</p>
<p><strong>Descripción:</strong> @Model.Description</p>
<p><strong>Fecha límite:</strong> @Model.DueDate.ToLocalTime().ToString("g")</p>
<p><strong>Puntos máximos:</strong> @Model.MaxScore</p>

<hr />

@if (User.IsInRole("Estudiante"))
{
    <h4>Mi entrega</h4>

    @if (submission == null)
    {
        <p class="text-warning">No has entregado esta tarea aún.</p>
        <a asp-controller="Submissions" asp-action="Create" asp-route-assignmentId="@Model.Id"
           class="btn btn-success">Entregar tarea</a>
    }
    else
    {
        <p><strong>Fecha de entrega:</strong> @submission.SubmittedAt.ToLocalTime().ToString("g")</p>

        @if (submission.CurrentGrade.HasValue)
        {
            <p><strong>Calificación:</strong> @submission.CurrentGrade / @Model.MaxScore</p>
        }
        else
        {
            <p><strong>Estado:</strong> Entregada (pendiente de calificar)</p>
        }
    }
}


@if (User.IsInRole("Administrador"))
{
    <a asp-action="Editar" asp-route-id="@Model.Id" class="btn btn-primary">Editar</a>
    <a asp-action="Delete" asp-route-id="@Model.Id" class="btn btn-danger">Eliminar</a>
}

